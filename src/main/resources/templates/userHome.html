<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>

<header class="header">
    <a th:href="@{/logout}" class="header-button">Logout</a>
    <a th:href="@{/user/review}" class="header-button">Write Review</a>
    <h1 class="header-title">User Dashboard</h1>
    <a th:href="@{/user/reservation}" class="header-button">Reservation</a> <!-- üîπ –î–æ–±–∞–≤–µ–Ω –±—É—Ç–æ–Ω -->
    <a th:href="@{/user/settings}" class="header-button">Settings</a>
    <a th:href="@{/notifications}" class="header-button notification-btn">
        Notifications <span id="notificationBadge" class="badge">0</span>
    </a>
</header>

<main class="container">
    <h2>Welcome, User!</h2>
    <p>Here you can manage your profile and reservations.</p>
    <p th:if="${successMessage}" th:text="${successMessage}" class="success-message"></p>
</main>
<div id="weather-time"></div>

<script src="/js/script.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch('/notifications/unread-count')
            .then(response => response.json())
            .then(data => {
                let badge = document.getElementById("notificationBadge");
                if (data.count > 0) {
                    badge.textContent = data.count;
                    badge.style.backgroundColor = "red"; // –û—Ü–≤–µ—Ç—è–≤–∞ –≤ —á–µ—Ä–≤–µ–Ω–æ –ø—Ä–∏ –Ω–µ–ø—Ä–æ—á–µ—Ç–µ–Ω–∏
                } else {
                    badge.style.display = "none"; // –°–∫—Ä–∏–≤–∞, –∞–∫–æ –Ω—è–º–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
                }
            });
    });
</script>
</body>
</html>
